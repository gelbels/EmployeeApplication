<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNFinished Business Job Application</title>
    <link rel="stylesheet" href="styles2.css">
    <script src="/js/iframeResizer.contentWindow.min.js"></script>
</head>

<body class="container">
    <!-- <h1>Unfinished Business</h1>
    <h2>Employment Application</h2> -->

    <h2>Work History</h2>
    <form action="" method="post" id="form-container" class="form-fields">
        <div class="fieldset-group">
            <h2 name="Field Group Title">Employer 1</h2>
            <fieldset>
                <h3>Supervisor Contact</h3>

                <div class="input-wrapper">
                    <input type="text" name="employer_name[]" placeholder="First Name" required>
                    <label for="employer_name">Supervisor First Name</label>
                </div>

                <div class="input-wrapper">
                    <input type="text" name="employer_name[]" placeholder="Last Name" required>
                    <label for="employer_name">Supervisor Last Name</label>
                </div>

                <div class="input-wrapper">
                    <input type="tel" name="telephone[]" placeholder="Phone Numer: 123-456-7890" required>
                    <label for="telephone">Supervisor Phone Number</label>
                </div>

                <div class="input-wrapper">
                    <input type="text" name="email[]" placeholder="Email Address" required>
                    <label for="email">Email Address</label>
                </div>
            </fieldset>

            <fieldset>
                <h3>Address</h3>

                <div class="input-wrapper">
                    <input type="text" id="street" name="street" placeholder="Street" pattern="[A-Za-z0-9\s]+" required>
                    <label for="street">Street</label>
                </div>

                <div class="input-wrapper">
                    <input type="text" id="city" name="city" placeholder="City" pattern="[A-Za-z\s]+" required>
                    <label for="city">City</label>
                </div>

                <div class="input-wrapper">
                    <input type="text" id="state" name="state" placeholder="State" pattern="[A-Za-z]{2}" required>
                    <label for="state">State</label>
                </div>

                <div class="input-wrapper">
                    <input type="text" id="zip" name="zip" placeholder="ZIP Code" pattern="[0-9]{5}" required>
                    <label for="zip">ZIP Code</label>
                </div>
            </fieldset>

            <fieldset>
                <div class="input-range">
                    <label for="employment_dates_from">Employment Dates</label>
                    <div class="input-wrapper">
                        <input type="date" id="employment_dates_from" name="employment_dates_from" value="2023-12-01"
                            placeholder="From" required>
                        <label for="employment_dates_from">From</label>
                    </div>

                    <div class="input-wrapper">
                        <input type="date" id="employment_dates_to" name="employment_dates_to" value="2023-12-05"
                            placeholder="To" required>
                        <label for="employment_dates_to">To</label>
                    </div>
                </div>

                <div class="input-range">
                    <label for="pay_start">Pay or Salary</label>
                    <div class="input-wrapper">
                        <input type="text" id="pay_start" name="pay_start" placeholder="Start" required>
                        <label for="pay_start">Starting</label>
                    </div>

                    <div class="input-wrapper">
                        <input type="text" id="pay_final" name="pay_final" placeholder="Final" required>
                        <label for="pay_final">Final</label>
                    </div>
                </div>

                <div class="input-wrapper">
                    <input type="text" id="last_job_title" name="last_job_title" placeholder="Job Title" required>
                    <label for="last_job_title">Job Title</label>
                </div>

                <div class="form-field-buttons">
                    <label for="contact_employer">
                        <input type="checkbox" id="contact_employer" name="contact_employer">
                        May we contact this employer?
                    </label>
                </div>

                <div class="input-range">
                    <div class="input-wrapper">
                        <label for="reason_for_leaving">Reason for Leaving <b>(Be Specific)</b></label>
                        <textarea id="reason_for_leaving" name="reason_for_leaving"
                            placeholder="Ex Pursuing a new opportunity for career growth." rows="6" required></textarea>
                    </div>

                    <div class="input-wrapper">
                        <label for="duties_skills">Duties, Skills, Advancements</label>
                        <textarea id="duties_skills" name="duties_skills"
                            placeholder="Ex Managed a team of 10, proficient in project management." rows="6"
                            required></textarea>
                    </div>
                </div>
            </fieldset>
        </div>
    </form>
    <div class="center">
        <button type="button" id="refButton" onclick="addContact()">+ Add Contact</button>
    </div>

    <script>
        let contactCount = 1;

        function addContact() {
            if (contactCount < 4) {
                var formContainer = document.getElementById('form-container');
                var newContact = formContainer.firstElementChild.cloneNode(true);

                formContainer.appendChild(newContact);

                {
                    const elements = document.getElementsByName("Field Group Title");
                    for (let i = 0; i < elements.length; i++) {
                        elements[i].textContent = "Employer " + (i + 1);
                    }
                }

                const deleteButton = document.createElement('button');
                deleteButton.type = 'button';
                deleteButton.classList.add('delete-button');
                deleteButton.textContent = 'Delete';
                deleteButton.onclick = function () {
                    newContact.removeChild(deleteButton);
                    formContainer.removeChild(newContact);
                    contactCount--;
                };

                newContact.appendChild(deleteButton);

                contactCount++;
            } else {
                alert("A maximum amount of contact information fulfilled.")
            }
        }

        function validateEmploymentDates() {
            const startDateInput = document.querySelector('input[name="employment_dates_from[]"]');
            const endDateInput = document.querySelector('input[name="employment_dates_to[]"]');

            startDateInput.max = endDateInput.value; // Set the start date max to the end date
            endDateInput.min = startDateInput.value; // Set the end date min to the start date

            // // Check if the end date is not before the start date
            // if (startDateInput.value > endDateInput.value) {
            //     alert("End date cannot be before the start date");
            //     endDateInput.value = startDateInput.value; // Reset end date to start date
            // }
        }

        // Add event listener to the end date input
        document.querySelector('input[name="employment_dates_to[]"]').addEventListener('input', validateEmploymentDates);
    </script>
</body>

</html>