<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNFinished Business Job Application</title>
    <link rel="stylesheet" href="styles2.css">
    <script src="/js/iframeResizer.contentWindow.min.js"></script>
</head>

<body class="container">
    <!-- <h1>Unfinished Business</h1>
    <h2>Employment Application</h2> -->

    <form action="nextStep.js" method="post">

        <h3>Work History</h3>
        <div id="form-container">
            <div class="form-fields">
                <fieldset class="visually-hidden">
                    <div class="form-field-group">
                        <label class="visually-hidden" for="employer_name">Employer Name:</label>
                        <input type="text" name="employer_name[]" placeholder="Employer Name" required>

                        <label class="visually-hidden" for="address">Address:</label>
                        <input type="text" name="address[]" placeholder="Address" required>

                        <label class="visually-hidden" for="city_state_zip">City, State, ZIP:</label>
                        <input type="text" name="city_state_zip[]" placeholder="Ex: Jacksonville, Florida, 32256"
                            required>

                        <label class="visually-hidden" for="telephone">Telephone:</label>
                        <input type="tel" name="telephone[]" placeholder="Ex: 123-456-7890" required>

                        <label class="visually-hidden" for="email">Email Address:</label>
                        <input type="text" name="email[]" placeholder="Ex: example@email.com" required>
                    </div>


                    <div class="form-field-group">
                        <label class="visually-hidden" for="supervisor_name">Name of Last Supervisor:</label>
                        <input type="text" name="supervisor_name[]" placeholder="Ex: First Last" required>

                        <label class="visually-hidden" for="employment_dates_from">Employment Dates - Moneh:</label>
                        <input type="month" name="employment_dates_from[]" required>

                        <label class="visually-hidden" for="employment_dates_to">Employment Dates - To:</label>
                        <input type="month" name="employment_dates_to[]" required>

                        <label class="visually-hidden" for="pay_start">Pay or Salary - Start: $</label>
                        <input type="text" name="pay_start[]" placeholder="Ex: 50000" required>

                        <label class="visually-hidden" for="pay_final">Pay or Salary - Final: $</label>
                        <input type="text" name="pay_final[]" placeholder="Ex: 60000" required>

                        <label class="visually-hidden" for="last_job_title">Your Last Job Title:</label>
                        <input type="text" name="last_job_title[]" placeholder="Ex: Professor" required>

                        <label class="visually-hidden" for="contact_employer">May we contact this employer?<input
                                type="checkbox" name="contact_employer[]"></label>
                    </div>
                </fieldset>


                <fieldset>

                    <div class="form-field-group">
                        <h3 name="Field Group Title">Employer 1</h3>
                        <div class="field-row">
                            <label class="visually-hidden" for="supervisor_name">Name of Last Supervisor</label>
                            <input type="text" name="supervisor_name[]" placeholder="Name of Last Supervisor" required>
                        </div>

                        <div class="field-row-group">
                            <label for="employment_dates_from">Employment Dates</label>
                            <label class="visually-hidden" for="employment_dates_from">From</label>
                            <input type="date" name="employment_dates_from[]" value="2023-12-05" placeholder="From"
                                required>

                            <span>-</span>

                            <label class="visually-hidden" for="employment_dates_to">To:</label>
                            <input type="date" name="employment_dates_to[]" value="2023-12-01" placeholder="To"
                                required>
                        </div>


                        <div class="field-row-group">
                            <label for="pay_start">Pay or Salary</label>
                            <label class="visually-hidden" for="pay_start">Pay or Salary - Start: $</label>
                            <input type="text" name="pay_start[]" placeholder="Start" required>

                            <span>-</span>

                            <label class="visually-hidden" for="pay_final">Pay or Salary - Final: $</label>
                            <input type="text" name="pay_final[]" placeholder="Final" required>
                        </div>

                        <div class="field-row">
                            <label class="visually-hidden" for="last_job_title">Job Title:</label>
                            <input type="text" name="last_job_title[]" placeholder="Job Title" required>
                        </div>

                        <div class="field-row">
                            <label for="contact_employer">
                                <input type="checkbox" name="contact_employer[]">
                                May we contact this employer?<br>
                            </label>
                        </div>
                    </div>

                    <div class="form-field-group">
                        <div>
                            <label for="reason_for_leaving">Reason for Leaving <b>(Be Specific)</b>:</label>
                            <br>
                            <textarea class="custom-textarea" name="reason_for_leaving[]"
                                placeholder="Ex: Pursuing a new opportunity for career growth." rows="6"
                                required></textarea>
                        </div>

                        <div>
                            <label for="duties_skills">Duties, Skills, Advancements:</label>
                            <br>
                            <textarea class="custom-textarea" name="duties_skills[]"
                                placeholder="Ex: Managed a team of 10, proficient in project management." rows="6"
                                required></textarea>
                        </div>
                    </div>
                </fieldset>
            </div>
        </div>
        <div class="center">
            <button type="button" id="refButton" onclick="addContact()">+ Add Contact</button>
        </div>
    </form>

    <script>
        let contactCount = 1;

        function addContact() {


            if (contactCount < 4) {
                var formContainer = document.getElementById('form-container');
                var newContact = formContainer.firstElementChild.cloneNode(true);

                formContainer.appendChild(newContact);

                {
                    const elements = document.getElementsByName("Field Group Title");
                    for (let i = 0; i < elements.length; i++) {
                        elements[i].textContent = "Employer " + (i + 1);
                    }
                }

                const deleteButton = document.createElement('button');
                deleteButton.type = 'button';
                deleteButton.classList.add('delete-button');
                deleteButton.textContent = 'Delete';
                deleteButton.onclick = function () {
                    formContainer.removeChild(deleteButton);
                    formContainer.removeChild(newContact);
                };

                formContainer.appendChild(deleteButton);

                contactCount++;
            } else {
                alert("A maximum amount of contact information fulfilled.")
            }
        }

        function validateEmploymentDates() {
            const startDateInput = document.querySelector('input[name="employment_dates_from[]"]');
            const endDateInput = document.querySelector('input[name="employment_dates_to[]"]');

            startDateInput.max = endDateInput.value; // Set the start date max to the end date
            endDateInput.min = startDateInput.value; // Set the end date min to the start date

            // // Check if the end date is not before the start date
            // if (startDateInput.value > endDateInput.value) {
            //     alert("End date cannot be before the start date");
            //     endDateInput.value = startDateInput.value; // Reset end date to start date
            // }
        }

        // Add event listener to the end date input
        document.querySelector('input[name="employment_dates_to[]"]').addEventListener('input', validateEmploymentDates);
    </script>

    <div class="footer center-group">
        <a class="button left" href="page1.html">
            <span>Previous</span>
        </a>
        <a class="button right" href="page3-4.html">
            <span>Next</span>
        </a>
    </div>
</body>

</html>